(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{569:function(t,e,o){"use strict";(function(t){o(22),o(21),o(20),o(30),o(31);var n=o(8),r=(o(189),o(53),o(61),o(19),o(39)),c=o(16);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}e.a={name:"Summary",props:{items:Array,cgvAccept:Boolean},data:function(){return{codePromo:"",isConditionsAccepted:!1,errorCodePromo:""}},computed:v(v({user:function(){return this.$store.getters["auth/user"]},totalPriceWithoutDiscountCode:function(){return this.totalPrice()}},Object(c.c)({totalPrice:"localStorage/price",getItemPrice:"localStorage/itemPrice",getOptionLivraison:"optionLivraison/optionLivraison",discountCode:"localStorage/discountCode"})),{},{calcTva:function(){return(this.totalPrice()-this.totalPrice()/1.2).toFixed(2)},ttcTotalProductPrice:function(){return parseFloat(this.totalPrice).toFixed(2).replace(".",",")},listTva:function(){return this.items.reduce((function(t,e){return(t[e.tva]=t[e.tva]||[]).push(e),t}),{})}}),watch:{isConditionsAccepted:function(t){this.emitChange(t)}},methods:v(v({getTotalPriceHt:function(){var t=this;return parseFloat(this.items.reduce((function(e,o){return e+parseFloat(t.getItemPrice(o)*o.itemQuantity)-parseFloat(t.getItemPrice(o)*o.itemQuantity)*o.tva/100}),0)).toFixed(2).replace(".",",")},getTva:function(t,e){var o=this;return parseFloat(t.reduce((function(t,n){return t+parseFloat(o.getItemPrice(n)*n.itemQuantity)*e/100}),0)).toFixed(2).replace(".",",")}},Object(c.d)({deleteItemFromCart:"localStorage/delete",setDiscountCode:"localStorage/setDiscountCode",removeDiscountCode:"localStorage/removeDiscountCode",addToCart:"localStorage/add",removeFromCart:"localStorage/remove"})),{},{checkout:function(){var e=this;this.items.forEach((function(t){t.chosenPrice=e.getItemPrice(t),t.chosenTotalPrice=e.getItemPrice(t)})),r.a.collection("customers").doc(t.env.ID_CUSTOMER).collection("sites").doc(t.env.ID_SITE).collection("users").doc(this.user.mail).collection("orders").add({checkout:this.items,ttcTotalProductPrice:this.ttcTotalProductPrice})},emitChange:function(t){this.$emit("conditionsChange",t)}}),components:{}}}).call(this,o(17))},767:function(t,e,o){t.exports=o.p+"img/delete.ef20552.svg"},901:function(t,e,o){"use strict";o.r(e);var n=o(569).a,r=o(12),component=Object(r.a)(n,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container cart"},[n("table",{staticClass:"list-article"},[t._m(0),t._v(" "),t._l(t.items,(function(e,i){return n("tr",{key:i,attrs:{item:e}},[n("NuxtLink",{attrs:{to:"/produits/"+e.id}},[n("td",[n("img",{attrs:{src:e.image,alt:""}}),t._v(" "),n("div",[n("h3",[t._v(t._s(e.name))])])])]),t._v(" "),n("td",[n("p",[t._v(t._s(t.getItemPrice(e))+"€")])]),t._v(" "),n("td",[n("div",{staticClass:"flex justify-center"},[1==e.itemQuantity?n("img",{staticClass:"quantity-item-delete",staticStyle:{"margin-right":"10px"},attrs:{src:o(767)},on:{click:function(o){return t.removeFromCart(e)}}}):n("span",{staticClass:"quantity-item-change",on:{click:function(o){return t.removeFromCart(e)}}},[t._v("-")]),t._v(" "),n("span",[t._v("\n              "+t._s(e.itemQuantity)+"\n            ")]),t._v(" "),n("span",{staticClass:"quantity-item-change",on:{click:function(o){return t.addToCart(e)}}},[t._v("+")])])]),t._v(" "),n("td",[n("p",[t._v(t._s((t.getItemPrice(e)*e.itemQuantity).toFixed(2))+"€")])]),t._v(" "),n("td",[t.items.length>1&&("retrait"==t.$store.getters["optionLivraison/optionLivraison"].mode||"livraison"==t.$store.getters["optionLivraison/optionLivraison"].mode&&t.totalPrice()-t.getItemPrice(e)*e.itemQuantity>t.$store.getters["optionLivraison/optionLivraison"].zone.minAmount)?n("div",{staticClass:"delete-item",on:{click:function(o){return t.deleteItemFromCart(e)}}},[t._m(1,!0)]):t._e()])],1)}))],2),t._v(" "),n("ul",{staticClass:"list-article-mobile"},t._l(t.items,(function(e,i){return n("li",{key:i,attrs:{item:e}},[n("div",{staticStyle:{display:"flex","align-items":"center"}},[n("NuxtLink",{attrs:{to:"/produits/"+e.id}},[n("img",{attrs:{src:e.image,alt:"image de l'article"}})]),t._v(" "),n("div",{staticClass:"column"},[n("p",{staticClass:"titre"},[t._v(t._s(e.name))]),t._v(" "),n("div",{staticClass:"row"},[n("p",[t._v("Prix unitaire :")]),t._v(" "),n("p",[t._v(t._s(t.getItemPrice(e).replace(".",","))+"€")])]),t._v(" "),n("div",{staticClass:"row"},[n("p",[t._v("Quantité :")]),t._v(" "),n("div",{staticClass:"flex",staticStyle:{"justify-content":"flex-end"}},[e.itemQuantity>1?n("p",{staticClass:"quantity-item-change",on:{click:function(o){return t.removeFromCart(e)}}},[t._v("-")]):n("p",{staticClass:"quantity-item-change",on:{click:function(o){return t.deleteItemFromCart(e)}}},[t._v("suppr")]),t._v(" "),n("p",[t._v(t._s(e.itemQuantity))]),t._v(" "),n("p",{staticClass:"quantity-item-change",on:{click:function(o){return t.addToCart(e)}}},[t._v("+")])])]),t._v(" "),n("div",{staticClass:"row row-sum"},[n("p",[t._v("Total TTC :")]),t._v(" "),n("p",[t._v(t._s((t.getItemPrice(e)*e.itemQuantity).toFixed(2).replace(".",","))+"€")])])])],1)])})),0),t._v(" "),n("div",{staticClass:"cart-footer"},[n("div",{staticClass:"zone-promo"}),t._v(" "),n("div",{staticClass:"zone-totaux"},[n("div",{staticClass:"ligne-total dashed"},[n("p",[t._v("Nombre de produit")]),t._v(" "),n("p",[t._v(t._s(t.items.length))])]),t._v(" "),n("div",{staticClass:"ligne-subtotal dashed"},[n("p",[t._v("Total HT")]),t._v(" "),n("p",[t._v(t._s(t.getTotalPriceHt())+"€")])]),t._v(" "),t._l(t.listTva,(function(e,i){return n("div",{key:i,staticClass:"ligne-total"},[n("p",[t._v("TVA "+t._s(e[0].tva)+" %")]),t._v(" "),n("p",[t._v(t._s(t.getTva(e,e[0].tva))+"€")])])})),t._v(" "),n("div",{staticClass:"ligne-total-ttc"},[n("p",[t._v("Total TTC")]),t._v(" "),n("p",[t._v(t._s(t.ttcTotalProductPrice)+"€")])]),t._v(" "),n("div",{staticClass:"ligne-cgv"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.isConditionsAccepted,expression:"isConditionsAccepted"}],attrs:{type:"checkbox",id:"acceptConditions"},domProps:{checked:Array.isArray(t.isConditionsAccepted)?t._i(t.isConditionsAccepted,null)>-1:t.isConditionsAccepted},on:{change:function(e){var o=t.isConditionsAccepted,n=e.target,r=!!n.checked;if(Array.isArray(o)){var c=t._i(o,null);n.checked?c<0&&(t.isConditionsAccepted=o.concat([null])):c>-1&&(t.isConditionsAccepted=o.slice(0,c).concat(o.slice(c+1)))}else t.isConditionsAccepted=r}}}),t._v(" "),n("label",{attrs:{"aria-describedby":"label",for:"acceptConditions"}},[t._v("J'ai lu et j'accepte les Conditions Générales de Vente.")])]),t._v(" "),"livraison"==t.getOptionLivraison.mode&&t.totalPrice(!1)<parseFloat(t.getOptionLivraison.zone.minAmount)?n("div",{staticClass:"ligne-alert"},[n("p",[t._v("Votre panier doit atteindre le montant minimum de "),n("b",[t._v(t._s(t.getOptionLivraison.zone.minAmount+"€ HT"))]),t._v(" pour être livré dans votre zone.")])]):t._e()],2)])])}),[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("tr",[o("th",[t._v("Produits")]),t._v(" "),o("th",[t._v("Prix unitaire")]),t._v(" "),o("th",{staticClass:"align-center"},[t._v("Quantité")]),t._v(" "),o("th",[t._v("Total")]),t._v(" "),o("th")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"mdiv"},[e("div",{staticClass:"md"})])}],!1,null,null,null);e.default=component.exports}}]);