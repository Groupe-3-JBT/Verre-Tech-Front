(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{591:function(t,e,r){var content=r(766);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(48).default)("4e9c9990",content,!0,{sourceMap:!1})},592:function(t,e,r){var content=r(768);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(48).default)("0e5950d9",content,!0,{sourceMap:!1})},761:function(t,e,r){"use strict";var o;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=((o=r(762))&&o.__esModule?o:{default:o}).default;e.default=n},762:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,r(763);var o,n=(o=r(764))&&o.__esModule?o:{default:o};function c(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var l=new(function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.instance?t.instance:(t.instance=this,this._name="Krypton Glue",this.configuration={},this.domain=null,this.formToken=null,this.publicKey=null,this.loaded=null,this)}var e,r,o;return e=t,(r=[{key:"loadLibrary",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=!1;return this.loaded?Promise.resolve({KR:window.KR}):t?e?(/^(?:http(s)?:\/\/)?[\w.-]+(?:\.[\w.-]+)+[\w\-._~:/?#[\]@!$&'()*+,;=.]+$/g.test(t)||(o=!0,console.error("[".concat(t,"] is not a valid endpoint domain"))),/^\d{2,8}:(|test)publickey_.+$/g.test(e)||(o=!0,console.error("[".concat(e,"] is not a valid public key"))),o?Promise.reject("Invalid endpoint or public key"):(this.domain=t,this.publicKey=e,this.formToken=r,this.domain&&this.publicKey?(this.loaded=!0,this.loadKryptonClient()):Promise.reject("The library cannot be loaded"))):Promise.reject("Public key not defined"):Promise.reject("Domain not defined")}},{key:"loadKryptonClient",value:function(){var t=this,e=this.publicKey,r=this.domain;return new Promise((function(o,c){var script=document.createElement("script");script.type="text/javascript",/^.+\/$/.test(r)||(r+="/"),script.src="".concat(r,"static/js/krypton-client/V4.0/stable/kr-payment-form.min.js"),script.setAttribute("kr-public-key",e),script.setAttribute("kr-spa-mode","true"),t.formToken&&script.setAttribute("kr-form-token",t.formToken),!document.querySelector('script[src="'.concat(script.src,'"]'))&&document.body?document.body.appendChild(script):document.body||console.warn("document.body is undefined"),(0,n.default)(window,"KR",(function(){o({KR:window.KR})}))}))}}])&&c(e.prototype,r),o&&c(e,o),t}());e.default=l},763:function(t,e,r){"use strict";t.exports=r(333).polyfill()},764:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default=function(t,e,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:150,n=function n(){t[e]?r():setTimeout(n,o)};setTimeout(n,0)}},765:function(t,e,r){"use strict";r(591)},766:function(t,e,r){var o=r(47)(!1);o.push([t.i,".conteneur[data-v-5b178c5f]{display:flex;flex-direction:row;justify-content:center;align-items:center;height:100%;width:100%}",""]),t.exports=o},767:function(t,e,r){"use strict";r(592)},768:function(t,e,r){var o=r(47)(!1);o.push([t.i,"#myPaymentForm,.kr-embedded{width:100%!important}.kr-embedded .kr-payment-button{background-color:var(--color1)!important;width:100%;border:2px solid var(--color1);color:var(--color2);padding:.5rem 1rem;font-size:1.2rem;text-transform:uppercase;border-radius:10px;align-items:center;font-family:var(--font1);outline:none;cursor:pointer;position:relative;display:flex;text-align:center;justify-content:center;flex-direction:row;transition:all .3s ease-in-out;width:100%!important}.kr-embedded .kr-payment-button:hover{background-color:var(--color2)!important;color:var(--color1);transition:all .3s ease-in-out;border:2px solid var(--color1);width:100%!important}.kr-form-error{width:100%!important}",""]),t.exports=o},900:function(t,e,r){"use strict";r.r(e);r(22),r(21),r(20),r(31),r(19),r(32);var o=r(8),n=(r(189),r(53),r(60),r(29),r(16)),c=r(88),l=r.n(c),d=r(761),f=r.n(d);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var y={data:function(){return{msg:"paiement",base64Auth:""}},computed:v(v({user:function(){return this.$store.getters["auth/user"]},totalPriceWithoutDiscountCode:function(){return this.totalPrice(!1)}},Object(n.c)({totalPrice:"localStorage/price",items:"localStorage/items",getItemPrice:"localStorage/itemPrice",getOptionLivraison:"optionLivraison/optionLivraison",discountCode:"localStorage/discountCode"})),{},{calcTva:function(){return(this.totalPrice()-this.totalPrice()/1.2).toFixed(2)},ttcTotalProductPrice:function(){return parseFloat(this.totalPrice()).toFixed(2).replace(".",",")},listTva:function(){return this.items.reduce((function(t,e){return(t[e.fields.TVA]=t[e.fields.TVA]||[]).push(e),t}),{})}}),mounted:function(){var t=this;this.base64Auth=btoa("69876357:testpassword_DEMOPRIVATEKEY23G4475zXZQ2UA5x7M");var e={Authorization:"Basic "+this.base64Auth,"Content-Type":"application/json"},r={amount:parseFloat(100*parseFloat(this.totalPrice()).toFixed(2)).toFixed(0),currency:"EUR",orderId:"myOrderId-999999",customer:{email:"testMail@test.fr"}};l.a.post("https://api.systempay.fr/api-payment/V4/Charge/CreatePayment",r,{headers:e}).then((function(e){f.a.loadLibrary("https://api.systempay.fr","73239078:testpublickey_Zr3fXIKKx0mLY9YNBQEan42ano2QsdrLuyb2W54QWmUJQ").then((function(t){return t.KR.setFormConfig({formToken:e.data.answer.formToken,"kr-language":"en-US"})})).then((function(t){return t.KR.addForm("#myPaymentForm")})).then((function(t){var e=t.KR,r=t.result;return e.showForm(r.formId)})).then((function(e){var r=e.KR;return r.onFormReady((function(){t.fixFrenchPaymentButton()})),r.setFormConfig({"kr-language":"fr-FR"})})).then((function(e){var r=e.KR;r.onSubmit((function(t){console.log("submitted",t)})),r.onError((function(e){t.$emit("paiement"),console.error(e)}))})).catch((function(t){console.log(t)}))}))},methods:{fixFrenchPaymentButton:function(){document.getElementById("myPaymentForm").querySelectorAll(".kr-payment-button")[0].childNodes[0].textContent="Payer "+parseFloat(parseFloat(this.totalPrice()).toFixed(2))+" EUR"},getTotalPriceHt:function(){var t=this;return parseFloat(this.items.reduce((function(e,r){return e+parseFloat(t.getItemPrice(r)*r.itemQuantity)-parseFloat(t.getItemPrice(r)*r.itemQuantity)*r.fields.TVA/100}),0)).toFixed(2).replace(".",",")},getTva:function(t,e){var r=this;return parseFloat(t.reduce((function(t,o){return t+parseFloat(r.getItemPrice(o)*o.itemQuantity)*e/100}),0)).toFixed(2).replace(".",",")}}},h=(r(765),r(767),r(12)),component=Object(h.a)(y,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container delivery"},[r("div",{staticClass:"row-bootstrap m-0"},[r("div",{staticClass:"col-12 col-md-4 half"},[r("h2",[t._v("MON PANIER")]),t._v(" "),r("div",{staticClass:"cart"},[r("ul",{staticClass:"cart-items"},t._l(t.items,(function(e,o){return r("li",{key:o},[r("div",{staticClass:"flex"},[r("h3",[t._v("\n                "+t._s(e.fields.Nom+(e.itemQuantity>1?" x"+e.itemQuantity:""))+"\n              ")]),t._v(" "),r("p",{staticClass:"price"},[t._v("\n                "+t._s((t.getItemPrice(e)*e.itemQuantity).toFixed(2).replace(".",","))+"€\n              ")])])])})),0),t._v(" "),r("div",{staticClass:"cart-footer"},[r("div",{staticClass:"flex row-subtotal"},[r("p",[t._v("Total HT")]),t._v(" "),r("p",[t._v(t._s(t.getTotalPriceHt())+"€")])]),t._v(" "),t._l(t.listTva,(function(e,i){return r("div",{key:i,staticClass:"flex"},[r("p",[t._v("TVA "+t._s(e[0].fields.TVA)+" %")]),t._v(" "),r("p",[t._v(t._s(t.getTva(e,e[0].fields.TVA))+"€")])])})),t._v(" "),r("div",{staticClass:"flex row-total"},[r("p",[t._v("Total TTC")]),t._v(" "),r("p",[t._v(t._s(t.ttcTotalProductPrice)+"€")])])],2)])]),t._v(" "),t._m(0)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-12 col-md-8 half"},[e("div",{staticClass:"conteneur"},[e("div",{attrs:{id:"myPaymentForm"}})])])}],!1,null,"5b178c5f",null);e.default=component.exports}}]);