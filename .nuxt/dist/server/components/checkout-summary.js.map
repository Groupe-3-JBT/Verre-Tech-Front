{"version":3,"file":"components/checkout-summary.js","sources":["webpack:///./assets/medias/delete.svg","webpack:///./components/checkout/Summary.vue?0286","webpack:///./components/checkout/Summary.vue","webpack:///./components/checkout/Summary.vue?9b60","webpack:///./components/checkout/Summary.vue?68e9"],"sourcesContent":["module.exports = __webpack_public_path__ + \"img/delete.ef20552.svg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container cart\"},[_vm._ssrNode(\"<table class=\\\"list-article\\\">\",\"</table>\",[_vm._ssrNode(\"<tr><th>Produits</th> <th>Prix unitaire</th> <th class=\\\"align-center\\\">Quantité</th> <th>Total</th> <th></th></tr> \"),_vm._l((_vm.items),function(item,i){return _vm._ssrNode(\"<tr\"+(_vm._ssrAttr(\"item\",item))+\">\",\"</tr>\",[_c('NuxtLink',{attrs:{\"to\":'/produits/' + item.id}},[_c('td',[_c('img',{attrs:{\"src\":item.fields.Image[0].url,\"alt\":\"\"}}),_vm._v(\" \"),_c('div',[_c('h3',[_vm._v(_vm._s(item.fields.Nom))])])])]),_vm._ssrNode(\" <td><p>\"+_vm._ssrEscape(_vm._s(_vm.getItemPrice(item))+\"€\")+\"</p></td> <td><div class=\\\"flex justify-center\\\">\"+((item.itemQuantity == 1)?(\"<img\"+(_vm._ssrAttr(\"src\",require(\"assets/medias/delete.svg\")))+\" class=\\\"quantity-item-delete\\\" style=\\\"margin-right:10px\\\">\"):(\"<span class=\\\"quantity-item-change\\\">-</span>\"))+\" <span>\"+_vm._ssrEscape(\"\\n              \"+_vm._s(item.itemQuantity)+\"\\n            \")+\"</span> <span class=\\\"quantity-item-change\\\">+</span></div></td> <td><p>\"+_vm._ssrEscape(_vm._s((_vm.getItemPrice(item) * item.itemQuantity).toFixed(2))+\"€\")+\"</p></td> <td>\"+((\n            _vm.items.length > 1 &&\n            (_vm.$store.getters['optionLivraison/optionLivraison'].mode ==\n              'retrait' ||\n              (_vm.$store.getters['optionLivraison/optionLivraison'].mode ==\n                'livraison' &&\n                _vm.totalPrice() - _vm.getItemPrice(item) * item.itemQuantity >\n                  _vm.$store.getters['optionLivraison/optionLivraison'].zone\n                    .minAmount))\n          )?(\"<div class=\\\"delete-item\\\"><div class=\\\"mdiv\\\"><div class=\\\"md\\\"></div></div></div>\"):\"<!---->\")+\"</td>\")],2)})],2),_vm._ssrNode(\" \"),_vm._ssrNode(\"<ul class=\\\"list-article-mobile\\\">\",\"</ul>\",_vm._l((_vm.items),function(item,i){return _vm._ssrNode(\"<li\"+(_vm._ssrAttr(\"item\",item))+\">\",\"</li>\",[_vm._ssrNode(\"<div style=\\\"display: flex; align-items: center;\\\">\",\"</div>\",[_c('NuxtLink',{attrs:{\"to\":'/produits/' + item.id}},[_c('img',{attrs:{\"src\":item.fields.Image[0].url,\"alt\":\"image de l'article\"}})]),_vm._ssrNode(\" <div class=\\\"column\\\"><p class=\\\"titre\\\">\"+_vm._ssrEscape(_vm._s(item.fields.Nom))+\"</p> <div class=\\\"row\\\"><p>Prix unitaire :</p> <p>\"+_vm._ssrEscape(_vm._s(_vm.getItemPrice(item).replace(\".\",\",\"))+\"€\")+\"</p></div> <div class=\\\"row\\\"><p>Quantité :</p> <div class=\\\"flex\\\" style=\\\"justify-content: flex-end;\\\">\"+((item.itemQuantity > 1)?(\"<p class=\\\"quantity-item-change\\\">-</p>\"):(\"<p class=\\\"quantity-item-change\\\">suppr</p>\"))+\" <p>\"+_vm._ssrEscape(_vm._s(item.itemQuantity))+\"</p> <p class=\\\"quantity-item-change\\\">+</p></div></div> <div class=\\\"row row-sum\\\"><p>Total TTC :</p> <p>\"+_vm._ssrEscape(_vm._s((_vm.getItemPrice(item) * item.itemQuantity).toFixed(2).replace(\".\",\",\"))+\"€\")+\"</p></div></div>\")],2)])}),0),_vm._ssrNode(\" <div class=\\\"cart-footer\\\"><div class=\\\"zone-promo\\\"></div> <div class=\\\"zone-totaux\\\"><div class=\\\"ligne-total dashed\\\"><p>Nombre de produit</p> <p>\"+_vm._ssrEscape(_vm._s(_vm.items.length))+\"</p></div> <div class=\\\"ligne-subtotal dashed\\\"><p>Total HT</p> <p>\"+_vm._ssrEscape(_vm._s(_vm.getTotalPriceHt())+\"€\")+\"</p></div> \"+(_vm._ssrList((_vm.listTva),function(item,i){return (\"<div class=\\\"ligne-total\\\"><p>\"+_vm._ssrEscape(\"TVA \"+_vm._s(item[0].fields.TVA)+\" %\")+\"</p> <p>\"+_vm._ssrEscape(_vm._s(_vm.getTva(item, item[0].fields.TVA))+\"€\")+\"</p></div>\")}))+\" <div class=\\\"ligne-total-ttc\\\"><p>Total TTC</p> <p>\"+_vm._ssrEscape(_vm._s(_vm.ttcTotalProductPrice)+\"€\")+\"</p></div> <div class=\\\"ligne-cgv\\\"><input type=\\\"checkbox\\\" id=\\\"acceptConditions\\\"\"+(_vm._ssrAttr(\"checked\",Array.isArray(_vm.isConditionsAccepted)?_vm._i(_vm.isConditionsAccepted,null)>-1:(_vm.isConditionsAccepted)))+\"> <label aria-describedby=\\\"label\\\" for=\\\"acceptConditions\\\">J'ai lu et j'accepte les Conditions Générales de Vente.</label></div> \"+((_vm.getOptionLivraison.mode == 'livraison' && _vm.totalPrice(false) < parseFloat(_vm.getOptionLivraison.zone.minAmount))?(\"<div class=\\\"ligne-alert\\\"><p>Votre panier doit atteindre le montant minimum de <b>\"+_vm._ssrEscape(_vm._s(_vm.getOptionLivraison.zone.minAmount+'€ HT'))+\"</b> pour être livré dans votre zone.</p></div>\"):\"<!---->\")+\"</div></div>\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { db } from \"~/plugins/firebase/firebaseConfig.js\";\nimport { mapGetters, mapMutations } from \"vuex\";\n\n\nexport default {\n  name: \"Summary\",\n  props: {\n    items: Array,\n    cgvAccept:Boolean\n  },\n  data() {\n    return {\n      codePromo: \"\",\n      isConditionsAccepted: false,\n      errorCodePromo: \"\",\n    };\n  },\n  computed: {\n    user() {\n      return this.$store.getters[\"auth/user\"];\n    },\n    totalPriceWithoutDiscountCode() {\n      return this.totalPrice()\n    },\n    ...mapGetters({\n      totalPrice: \"localStorage/price\",\n      getItemPrice: \"localStorage/itemPrice\",\n      getOptionLivraison: \"optionLivraison/optionLivraison\",\n      discountCode: \"localStorage/discountCode\"\n    }),\n    calcTva() {\n      var tvaCost = this.totalPrice() - (this.totalPrice() / 1.2);\n      return tvaCost.toFixed(2);\n    },\n    ttcTotalProductPrice() {\n      return (parseFloat(this.totalPrice)).toFixed(\n        2\n      ).replace(\".\",\",\");\n    },\n    listTva() {\n      var resultList = this.items.reduce((result, currentValue) => {\n          (result[currentValue.fields.TVA] = result[currentValue.fields.TVA] || []).push(currentValue);\n          return result;\n        }, {});\n      return resultList\n    }\n  },\n  watch: {\n    isConditionsAccepted(newVal) {\n      this.emitChange(newVal);\n    },\n  },\n  methods: {\n    getTotalPriceHt(){\n      return parseFloat(this.items.reduce((sum, currentValue) => {\n        return sum + parseFloat(this.getItemPrice(currentValue)*currentValue.itemQuantity) - (parseFloat(this.getItemPrice(currentValue)*currentValue.itemQuantity)*currentValue.fields.TVA/100);\n      }, 0)).toFixed(2).replace(\".\",\",\");\n    },\n    getTva(items, taux){\n      return parseFloat(items.reduce((sum, currentValue) => {\n        return sum + parseFloat(this.getItemPrice(currentValue)*currentValue.itemQuantity)*taux/100;\n      }, 0)).toFixed(2).replace(\".\",\",\");\n    },\n    ...mapMutations({\n      deleteItemFromCart: \"localStorage/delete\",\n      setDiscountCode: \"localStorage/setDiscountCode\",\n      removeDiscountCode: \"localStorage/removeDiscountCode\",\n      addToCart: \"localStorage/add\",\n      removeFromCart: \"localStorage/remove\",\n    }),\n    checkout() {\n      this.items.forEach((elem) => {\n        elem[\"chosenPrice\"] = this.getItemPrice(elem);\n        elem[\"chosenTotalPrice\"] = this.getItemPrice(elem);\n      });\n      var ref = db\n        .collection(\"customers\")\n        .doc(process.env.ID_CUSTOMER)\n        .collection(\"sites\")\n        .doc(process.env.ID_SITE)\n        .collection(\"users\")\n        .doc(this.user.mail)\n        .collection(\"orders\");\n      ref.add({\n        checkout: this.items,\n        ttcTotalProductPrice: this.ttcTotalProductPrice,\n      });\n    },\n    emitChange(value) {\n      this.$emit(\"conditionsChange\", value);\n    },\n  },\n\n  components: {},\n};\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/string-replace-loader/index.js??ref--12!./Summary.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!../../node_modules/string-replace-loader/index.js??ref--12!./Summary.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Summary.vue?vue&type=template&id=5c562467&\"\nimport script from \"./Summary.vue?vue&type=script&lang=js&\"\nexport * from \"./Summary.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"3b91a573\"\n  \n)\n\nexport default component.exports"],"mappings":";;;;;;AAAA;;;;;;;;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;ACXA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAGA;AACA;AACA;AACA;AACA;AAFA;AACA;AAGA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAJA;AACA;AAKA;AACA;AACA;AACA;AACA;AAAA;AACA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7BA;AA8BA;AACA;AACA;AACA;AACA;AAJA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AALA;AACA;AAMA;AACA;AACA;AACA;AACA;AACA;AAQA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AACA;AACA;AAvCA;AAyCA;AAzFA;;AC7IA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}